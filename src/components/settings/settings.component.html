<div class="max-w-2xl mx-auto px-4 sm:px-0">
  <h2 class="text-3xl font-bold tracking-tight text-white sm:text-4xl font-mono">Settings</h2>
  
  <div class="mt-8 border-t border-primary-border pt-8">
    <h3 class="text-xl font-bold tracking-tight text-white sm:text-2xl mb-2">Generation</h3>
    <p class="text-lg text-secondary-text">Configure default generation parameters.</p>

    <div class="mt-4 bg-secondary-bg/50 p-6 rounded-lg border border-primary-border space-y-6">
      <div>
        <label for="referrer" class="block text-sm font-medium text-primary-text">Referrer</label>
        <p class="text-xs text-secondary-text mb-1">Used in Pollinations GET calls for attribution.</p>
        <input id="referrer" type="url" [value]="settingsService.referrer()" (input)="onReferrerInput($event)" class="w-full bg-primary-bg border-gray-700 text-primary-text rounded-md p-2 focus:ring-2 focus:ring-accent focus:border-accent transition">
      </div>

      <div class="space-y-4">
        <label for="nologo" class="flex items-center justify-between cursor-pointer group">
          <span class="flex flex-col">
            <span class="text-sm font-medium text-primary-text group-hover:text-white transition-colors">Disable logo overlays</span>
            <span class="text-xs text-secondary-text">Request images without watermarks by default.</span>
          </span>
          <div class="relative w-11 h-6 bg-gray-600 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent">
            <input type="checkbox" id="nologo" class="sr-only peer" [checked]="settingsService.nologo()" (change)="onNologoChange($event)">
          </div>
        </label>
        
         <label for="privacy" class="flex items-center justify-between cursor-pointer group">
          <span class="flex flex-col">
            <span class="text-sm font-medium text-primary-text group-hover:text-white transition-colors">Private generations</span>
            <span class="text-xs text-secondary-text">Request that generated images not be publicly indexed.</span>
          </span>
          <div class="relative w-11 h-6 bg-gray-600 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent">
            <input type="checkbox" id="privacy" class="sr-only peer" [checked]="settingsService.private()" (change)="onPrivateChange($event)">
          </div>
        </label>

        <label for="safety" class="flex items-center justify-between cursor-pointer group">
          <span class="flex flex-col">
            <span class="text-sm font-medium text-primary-text group-hover:text-white transition-colors">Strict safety filters</span>
            <span class="text-xs text-secondary-text">Enable content safety filters for generations.</span>
          </span>
          <div class="relative w-11 h-6 bg-gray-600 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent">
            <input type="checkbox" id="safety" class="sr-only peer" [checked]="settingsService.safe()" (change)="onSafeChange($event)">
          </div>
        </label>
      </div>
    </div>
  </div>

  <div class="mt-8 border-t border-primary-border pt-8">
    <h3 class="text-xl font-bold tracking-tight text-white sm:text-2xl mb-2">Appearance</h3>
     <div class="mt-4 bg-secondary-bg/50 p-6 rounded-lg border border-primary-border">
        <label for="theme" class="flex items-center justify-between cursor-pointer group">
          <span class="flex flex-col">
            <span class="text-sm font-medium text-primary-text group-hover:text-white transition-colors">Dark Mode</span>
            <span class="text-xs text-secondary-text">Enable the dark theme for the application.</span>
          </span>
          <div class="relative w-11 h-6 bg-gray-600 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent">
            <input type="checkbox" id="theme" class="sr-only peer" [checked]="settingsService.themeDark()" (change)="onThemeChange($event)">
          </div>
        </label>
    </div>
  </div>

  <div class="mt-8 border-t border-primary-border pt-8">
    <h3 class="text-xl font-bold tracking-tight text-white sm:text-2xl mt-8 mb-2">Data Management</h3>
    <div class="mt-4 bg-secondary-bg/50 p-6 rounded-lg border border-primary-border space-y-6">
      <div>
          <label class="block text-sm font-medium text-primary-text">Export Gallery</label>
          <p class="text-xs text-secondary-text mb-2">Download a ZIP file of all your generated wallpapers and their metadata.</p>
          <button (click)="exportGallery()" [disabled]="isExporting()" class="w-48 flex justify-center items-center bg-accent-secondary hover:bg-opacity-80 disabled:bg-opacity-50 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-md transition-colors">
              @if (isExporting()) {
                  <svg class="animate-spin -ml-1 mr-2 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                  <span>Exporting...</span>
              } @else {
                  <span>Export My Gallery</span>
              }
          </button>
      </div>
    </div>
  </div>
</div>
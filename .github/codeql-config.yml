# =============================================================================
# CodeQL Configuration for PolliWall (Xterm1)
# =============================================================================
# This configuration provides comprehensive security analysis using GitHub's
# CodeQL engine. It is optimized for TypeScript/JavaScript applications with
# a focus on detecting security vulnerabilities.
#
# Security Focus Areas:
# - XSS (Cross-Site Scripting) vulnerabilities
# - Injection attacks (SQL, command, path traversal)
# - Insecure data handling
# - Cryptographic weaknesses
# - Authentication/authorization flaws
#
# Integration: This config is used by security.yml workflow
# =============================================================================

name: "CodeQL Configuration"

# Disable default queries and use security-and-quality suite
disable-default-queries: false

# Use security-extended query suite for comprehensive coverage
queries:
  - name: security-extended
    uses: security-extended
  - name: security-and-quality
    uses: security-and-quality

# Paths to analyze (focus on source code including Angular templates)
paths:
  - src
  - index.tsx
  - '**/*.html'

# Paths to ignore (exclude test files, generated code, dependencies, IDE configs)
paths-ignore:
  - '**/*.spec.ts'
  - '**/*.test.ts'
  - '**/__tests__/**'
  - '**/node_modules/**'
  - '**/dist/**'
  - '**/build/**'
  - '**/cypress/**'
  - '**/playwright/**'
  - '**/*.config.ts'
  - '**/*.config.js'
  - '**/.angular/**'
  - '**/.vscode/**'
  - '**/.idea/**'
  - '**/coverage/**'
  - '**/.nyc_output/**'

# Query filters to reduce false positives
query-filters:
  - exclude:
      id: js/unused-local-variable
  - exclude:
      id: js/angular/disabling-sce

# Additional packs for enhanced security analysis
packs:
  - codeql/javascript-queries
